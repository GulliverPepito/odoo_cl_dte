<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<template id="account.report_invoice">
			<t t-call="report.html_container">
				<t t-foreach="docs" t-as="o">
					<div class="page">
						<t t-call="l10n_cl_dte.dte_report_header"></t>
							<style type="text/css">

								/* table starts here */

								#table_dte {
								width: 100%;
								padding:5px;
								padding-left:10px;
								display: table;
								font-size:12px;
								border: 1px solid black;
								}
								#row {
								display: table-row;
								}
								#data {
								width:15%;
								border: 0px solid black;
								display: table-cell;
								font-weight:bold;
								}
								#values {
								width: 40%;
								border: 0px solid black;
								display: table-cell;
								}
								#right {
								width:150px;
								display: table-cell;
								border: 0px solid black;
								}



								.tablecorner{
								border-radius: 10px;
								-moz-border-radius: 10px;
								-webkit-border-radius: 10px;
								border: 1px solid #00000C;

								}

								.datagrid table {
								 border-collapse: collapse; 
								 text-align: left; 
								 width:	100%; 
								 } 
								.datagrid {
								font: normal 12px/150% Arial, Helvetica,
								sans-serif; 
								background: #fff; 
								overflow: hidden; 
								border: 1px	solid #000000; 
								-webkit-border-radius: 10px; 
								-moz-border-radius: 10px; 
								border-radius: 10px; 
								}
								.datagrid table td, .datagrid table th
								{ padding: 3px 10px; }.datagrid table thead th
								{background:-webkit-gradient( linear, left top, left bottom,
								color-stop(0.05, #000000), color-stop(1, #000000)
								);background:-moz-linear-gradient( center top, #000000 5%,
								#000000 100%
								);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#000000',
								endColorstr='#000000');background-color:#000000; color:#FFFFFF;
								font-size: 12px; font-weight: normal; } .datagrid table thead
								th:first-child { border: none; }.datagrid table tbody td {
								color: #000000; border-left: 1px solid #9EA7AB;font-size:
								12px;font-weight: normal; }.datagrid table tbody .alt td {
								background: #E0ECF2; color: #000000; }.datagrid table tbody
								td:first-child { border-left: none; }.datagrid table tbody
								tr:last-child td { border-bottom: none; }
								
								.tabletotals table { border-collapse: collapse; width: 100%; } .tabletotals {font: normal 12px/150% Arial, Helvetica, sans-serif; background: #fff; overflow: hidden; border: 1px solid #000000; -webkit-border-radius: 10px; -moz-border-radius: 10px; border-radius: 10px; }.tabletotals table td, .tabletotals table th { padding: 5px 5px; }.tabletotals table tbody td { color: #00496B; border-left: 1px solid #E1EEF4;font-size: 12px;font-weight: normal; }.tabletotals table tbody td:first-child { border-left: none; }.tabletotals table tbody tr:last-child td { border-bottom: none; }
								
								}
								// generated by cssbuttoncode.com
							</style>
							<p>
								<div class="tablecorner" id="table_dte">
									<div id="row">
										<div id="data">
											Señor(es)
										</div>
										<div id="values">
											:
											<span t-field="o.partner_id.name"></span>
										</div>
										<div id="right">
											Fecha
										</div>
									</div>
									<div id="row">
										<div id="data">
											R.U.T.
										</div>
										<div id="values">
											:
											<span t-field="o.partner_id.formated_vat"></span>
										</div>
										<div id="right">
											<span t-field="o.date_invoice" t-field-options='{"format": "long"}'></span>
										</div>
									</div>
									<div id="row">
										<div id="data">
											Giro
										</div>
										<div id="values">
											:
											<span t-field="o.invoice_turn.name"></span>
										</div>
										<div id="right">

										</div>
									</div>
									<div id="row">
										<div id="data">
											Dirección
										</div>
										<div id="values">
											:
											<span t-field="o.partner_id.street"></span>
										</div>
										<div id="right">

										</div>
									</div>
									<div id="row">
										<div id="data">
											Comuna
										</div>
										<div id="values">
											:
											<span t-field="o.partner_id.state_id.name"></span>
										</div>
										<div id="right">

										</div>
									</div>
								</div>
							</p>
							<br></br>
							<div class="datagrid">
								<table>
									<thead>
										<tr>
											<th style="width:5%;">item</th>
											<th style="width:10%;">Código</th>
											<th>Descripción</th>
											<th style="width:4%;">U.M.</th>
											<th style="width:8%;">Cantidad</th>
											<th style="width:10%;">Precio Unitario</th>
											<th style="width:10%;">%Descuento</th>
											<th style="width:10%;">Valor</th>
										</tr>
									</thead>
									<tbody>
									<t t-foreach="o.invoice_line_ids" t-as="l">
										<t t-if="l_odd">
                                        <tr class="alt">
                                            <td><span t-esc="l_index + 1"/></td>
                                            <td><span t-field="l.product_id.code"/></td>
                                            <td><span t-field="l.product_id.name"/></td>
                                            <td><span t-field="l.product_id.uom_id.name"/></td>
                                            <td><span t-field="l.quantity"/></td>
                                            <td><span t-field="l.price_unit" t-field-options='{"widget": "monetary", "display_currency": "statement.currency_id"}'/></td>
                                            <td><span t-field="l.discount"/></td>
                                            <td><span t-field="l.price_subtotal" t-field-options='{"widget": "monetary", "display_currency": "statement.currency_id"}'/></td>
                                        </tr>
                                        </t>
                                        <t t-if="l_even">
										<tr>
											<td class="alt"><span t-esc="l_index + 1"/></td>
											<td><span t-field="l.product_id.code"/></td>
											<td><span t-field="l.product_id.name"/></td>
											<td><span t-field="l.product_id.uom_id.name"/></td>
											<td><span t-field="l.quantity"/></td>
                                            <td><span t-field="l.price_unit"/></td>
                                            <td><span t-field="l.discount"/></td>
                                            <td><span t-field="l.price_subtotal"/></td>
										</tr>
										</t> 
									</t>
									</tbody>
								</table>
							</div>
							<br></br>
							<div t-if="o.related_document_ids" class="datagrid">
								<table>
 									<thead>
										<tr>
											<th colspan="2">Documentos Relacionados</th>
										</tr>
									</thead>
									<tbody>
									<t t-foreach="o.related_document_ids" t-as="r">
										<t t-if="r_odd">
                                        <tr class="alt">
                                            <td><span t-esc="r_index + 1"/></td>
                                            <td><span t-field="r.document_type"/> No. <span t-field="r.folio"/>
                                            del <span t-field="r.fecha"/> Ref.: <span t-field="r.name"/></td>
                                        </tr>
                                        </t>
                                        <t t-if="r_even">
										<tr>
											<td class="alt"><span t-esc="r_index + 1"/></td>
                                            <td><span t-field="r.document_type"/> No. <span t-field="r.folio"/>
                                            del <span t-field="r.fecha"/> Ref.: <span t-field="r.name"/></td>
										</tr>
										</t> 
									</t>
									</tbody>
								</table>
							</div>
							
							<!--  Totales e impuestos -->
							<div style="display: table; width:100%; height:100px;padding-top:10px;">
							    <div style="display: table-row;">

							        <div style="display: table-cell; width:60%; text-align: center; vertical-align: center; padding-right:5px;">
							                                
							                                 <!-- Pagos -->
 
				                            <div t-if="o.payment_ids" class="datagrid">
				                                <table>
				                                    <thead>
				                                        <tr>
				                                            <th colspan="4" style="text-align:left;">Pagos:</th>
				                                        </tr>
				                                    </thead>
				                                    <tbody>
				                                    <t t-foreach="o.payment_ids" t-as="p">
				                                        <t t-if="p_odd">
				                                        <tr class="alt">
				                                            <td style="text-align:left;width:20%;"><span t-field="p.payment_date"/></td>
				                                            <td><span t-field="p.amount" t-field-options='{"widget": "monetary", "display_currency": "statement.currency_id"}'/> <span t-field="p.journal_id.name"/></td>
				                                        </tr>
				                                        </t>
				                                        <t t-if="p_even">
				                                        <tr>
				                                            <td class="alt" style="text-align:left;width:20%;"><span t-field="p.payment_date"/></td>
                                                            <td><span t-field="p.amount" t-field-options='{"widget": "monetary", "display_currency": "statement.currency_id"}'/> <span t-field="p.journal_id.name"/></td>
				                                        </tr>
				                                        </t> 
				                                    </t>
				                                    </tbody>
				                                </table>
				                            </div>
							        </div>
							        <div style="display: table-cell; width:40%; vertical-align: top; padding-left:5px;">
							        <div class="tabletotals"><table>
										<tbody><tr><td style="text-align:right;font-weight: bold;">Total Neto </td><td> <span t-field="o.amount_untaxed" t-field-options='{"widget": "monetary", "display_currency": "statement.currency_id"}'/> </td></tr>
										<tr><td style="text-align:right;font-weight: bold;">Descuento Global</td><td><span t-field="o.amount_discount" t-field-options='{"widget": "monetary", "display_currency": "statement.currency_id"}'/></td></tr>
										<t t-foreach="o.tax_line_ids" t-as="tax">
										  <t t-if="tax.name != 'Excento'">
    										  <t t-if="tax.name == 'IVA 19% Venta'">
    										      <tr><td style="text-align:right;font-weight: bold;">I.V.A. 19%</td><td><span t-field="tax.amount"/></td></tr>
										      </t>
										      <t t-if="tax.name != 'IVA 19% Venta'">
    										      <tr><td style="text-align:right;font-weight: bold;"><span t-field="tax.name"/></td><td><span t-field="tax.amount"/></td></tr>
	                                           </t>
										  </t>
										</t>
										<tr><td style="text-align:right;font-weight: bold;">TOTAL</td><td><span t-field="o.amount_total" t-field-options='{"widget": "monetary", "display_currency": "statement.currency_id"}'/></td></tr>
										</tbody>
										</table>
									</div>
							        </div>
							    </div>
							</div>
							<!-- Fin totales -->
							
							<!-- Timbre S.I.I y Acuse de recibo -->
							
						<div style="display: table; width:100%; height:100px;padding-top:10px;">
                                <div style="display: table-row;">

                                    <div style="display: table-cell; width:50%; text-align: center; vertical-align: center; padding-right:5px;">	
							             <img class="img img-responsive" src="/l10n_cl_dte/static/src/img/timbre_test.png"/>
							             <p>Timbre Electrónico S.I.I.</p>
							             <p>Resolución XX del YYYY</p>
							        </div>
							         
							         <div style="display: table-cell; width:40%; vertical-align: top; padding-left:5px;">
							         </div>
							     </div>
							</div>
					</div>
				</t>
			</t>
		</template>
	</data>
</openerp>